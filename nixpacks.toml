# Railway Nixpacks Configuration
#
# Strategy: aptPkgs installs system libraries that Puppeteer's bundled Chrome needs.
# We do NOT install the 'chromium' apt package â€” on Ubuntu 22.04 it is a snap wrapper
# that does not work in containers.
# PUPPETEER_CACHE_DIR=/app/.puppeteer-cache ensures Chrome is downloaded into the
# project directory during npm install, so it survives into the runtime container.

[phases.setup]
aptPkgs = [
  "libnss3",
  "libnspr4",
  "libatk1.0-0",
  "libatk-bridge2.0-0",
  "libcups2",
  "libdrm2",
  "libxkbcommon0",
  "libxcomposite1",
  "libxdamage1",
  "libxfixes3",
  "libxrandr2",
  "libgbm1",
  "libasound2",
  "libxss1",
  "libxtst6",
  "fonts-liberation",
  "libpango-1.0-0",
  "libpangocairo-1.0-0"
]

[variables]
PUPPETEER_CACHE_DIR = "/app/.puppeteer-cache"
